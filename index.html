<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime Number Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Prime Number Game</h1>
    <p>山札から5枚のカードを引いてください。</p>
    <div id="deck">
        <button onclick="drawCards()">山札からカードを引く</button>
    </div>
    <div id="cards" class="card-container"></div>
    <button onclick="arrangeCards()">素数か判定</button>
    <p>選択した数字: <span id="selectedNumber"></span></p>
    <p id="primeResult"></p>

    <script>
        // カードの属性
        const cardTypes = ['A', 'B', 'C', 'D', 'E'];

        // カードの数字
        const allNumbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
        let deck = [];
        let selectedCards = [];
        let firstClickedCard = null;
        let doubleClickCount = 0;

        // 山札からカードを引く
        function drawCards() {
            // 山札を初期化
            deck = [...allNumbers];
            selectedCards = [];

            // 山札から5枚引く
            for (let i = 0; i < 5; i++) {
                const randomIndex = Math.floor(Math.random() * deck.length);
                const drawnCard = deck.splice(randomIndex, 1)[0];
                const cardType = cardTypes[i % cardTypes.length];
                selectedCards.push({ number: drawnCard, type: cardType });
            }

            displayCards();
        }

        // カードの表示
        function displayCards() {
            const cardsContainer = document.getElementById('cards');
            cardsContainer.innerHTML = '';

            selectedCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.textContent = card.number + '\n' + card.type;
                cardElement.dataset.type = card.type;
                cardElement.ondblclick = () => doubleClickCard(card.number, index);
                cardElement.onclick = () => selectCard(card.number, index);
                cardsContainer.appendChild(cardElement);
            });

            updateResult();
        }

        // カードの選択
        function selectCard(number, index) {
            if (firstClickedCard === null) {
                // 一回目のクリック
                firstClickedCard = { number, index };
            } else {
                // 二回目のクリック
                swapCards(firstClickedCard.index, index);
                firstClickedCard = null;
            }
            displayCards();
        }

        // カードの入れ替え
        function swapCards(index1, index2) {
            const temp = selectedCards[index1];
            selectedCards[index1] = selectedCards[index2];
            selectedCards[index2] = temp;
        }

        // 結果の更新
        function updateResult() {
            const selectedNumber = selectedCards.map(card => card.number).join('');
            const resultElement = document.getElementById('selectedNumber');
            resultElement.innerText = selectedNumber;
        }

        // 数字を作り、素数か判定する
        function arrangeCards() {
            const selectedNumber = selectedCards.map(card => card.number).join('');
            const resultElement = document.getElementById('primeResult');

            // 新しい結果を表示する前に元の結果をクリア
            resultElement.innerText = '';

            if (isPrime(parseInt(selectedNumber))) {
                resultElement.innerHTML = ' (素数です)';
            } else {
                resultElement.innerHTML = ' (素数ではありません)';
            }
        }

        // 素数かどうかの判定
        function isPrime(num) {
            if (num < 2) return false;
            for (let i = 2; i < num; i++) {
                if (num % i === 0) {
                    return false;
                }
            }
            return true;
        }
    </script>
</body>
</html>
